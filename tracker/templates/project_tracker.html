{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Tracker</title>
    <link rel="stylesheet" href="{% static 'css/project_tracker.css' %}">
</head>
<body>

    <!-- Button to open the popup -->
    <button onclick="openCreateProjectPopup()">Create Project</button>

    <!-- Popup Modal for Creating a Project -->
    <div id="createProjectModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeCreateProjectPopup()">&times;</span>
            <h1>Create Project</h1>

            <table>
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Input</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Project Name</td>
                        <td><input type="text" id="projectName" placeholder="Enter project name"></td>
                    </tr>
                    <tr>
                        <td>Start Date</td>
                        <td><input type="date" id="startDate"></td>
                    </tr>
                    <tr>
                        <td>End Date</td>
                        <td><input type="date" id="endDate"></td>
                    </tr>
                    <tr>
                        <td>Scope</td>
                        <td><input type="text" id="scope" placeholder="Enter Scope"></td>
                    </tr>
                    <tr>
                        <td>Category</td>
                        <td><input type="text" id="category" placeholder="Enter CATEGORY"></td>
                    </tr>
                    <tr>
                        <td>Benchmark</td>
                        <td><input type="number" id="Benchmark" placeholder="Enter project Benchmark"></td>
                    </tr>
                </tbody>
            </table>

            <!-- Submit Button -->
            <button class="submit-btn">Submit</button>
        </div>
    </div>

    <h1>Welcome to the Project Tracker</h1>

    <h3>User Details</h3>
    <p><strong>Employee ID:</strong> {{ user_data.employee_id }}</p>
    <p><strong>Name:</strong> {{ user_data.name }}</p>

    <h3>Task To Approve</h3>
    {% if to_approve_data %}
        <table>
            <thead>
                <tr>
                    {% for key, value in to_approve_data.items %}
                        <th>{{ key|capfirst }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                <tr>
                    {% for key, value in to_approve_data.items %}
                        <td>{{ value }}</td>
                    {% endfor %}
                </tr>
            </tbody>
        </table>

        <div class="button-container">
            <button class="action-btn accept-btn" onclick="handleTaskAction('accept', '{{ to_approve_data.name }}')">Accept</button>
            <button class="action-btn reject-btn" onclick="handleTaskAction('reject', '{{ to_approve_data.name }}')">Reject</button>
        </div>
    {% else %}
        <p>No tasks to approve.</p>
    {% endif %}

    <!-- âœ… Move JavaScript to the bottom -->
    <script src="{% static 'js/project_tracker.js' %}"></script>

</body>
</html>
