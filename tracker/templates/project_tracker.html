{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Tracker</title>

    <link rel="stylesheet" href="{% static 'css/project_tracker.css' %}">
    <link rel="stylesheet" href="{% static 'css/monthlyanalysis.css' %}">
    <link rel="stylesheet" href="{% static 'css/monthlyprojectanalysis.css' %}">
    <link rel="stylesheet" href="{% static 'css/weeklyanalysis.css' %}">
     

</head>
<body>
<div class="full-container">
    <div class="sidebar">
        </br>
        <img id="fusie" src="{% static 'images/img_19.png' %}" alt="Responsive image">
        </br></br></br></br>
        <img id="profile_pic" src="data:image/png;base64,{{ image_base64 }}" alt="Profile Image">
        <h4 id="profile_name"> {{ name }}</h4>
        <!-- <p>{{ employee_id }}</p> -->
        <p id="profile_designation" align="center">{{ designation }}</p>

        </br></br></br>    

        <div class="sidebar_buttons">
            <a class="sidebar-link" id="task-button" href="{% url 'task_dashboard' %}"
            data-default-img="{% static 'images/task_tracker.png' %}" 
            data-active-img="{% static 'images/task_tracker1.png' %}">
                <img src="{% static 'images/task_tracker.png' %}" alt="Task Tracker Icon"> TASK TRACKER
            </a>
            <a class="sidebar-link" id="attendance-button" href="{% url 'calendar' %}"
            data-default-img="{% static 'images/attendance.png' %}" 
            data-active-img="{% static 'images/attendance1.png' %}">
                <img src="{% static 'images/attendance.png' %}" alt="Attendance Icon"> ATTENDANCE
            </a>
            <a class="sidebar-link" id="leave-button"  href="{% url 'mainleavepage' %}"
            data-default-img="{% static 'images/leavepage.png' %}" 
            data-active-img="{% static 'images/leavepage1.png' %}">
                <img src="{% static 'images/leavepage.png' %}" alt="Leave Tracker Icon"> LEAVE TRACKER

            </a>
            {% if is_admin_or_md %}
            <a class="sidebar_link" id="project-button" 
            href="{% url 'project_tracker' %}" 
            data-default-img="{% static 'images/leavepage.png' %}" 
            data-active-img="{% static 'images/leavepage1.png' %}" >
            <img src="{% static 'images/leavepage.png' %}" alt="Project Tracker Icon"> PROJECT TRACKER
            </a>
            {% else %}
            <a class="sidebar_link" id="notifications" 
                href="{% url 'notifications_page' %}"
                data-default-img="{% static 'images/leavepage.png' %}" 
                data-active-img="{% static 'images/leavepage1.png' %}">
                <img src="{% static 'images/leavepage.png' %}" alt="notifications Icon"> NOTIFICATIONS
            </a>
            {% endif %}
            
        </div>

        <a  class="sign-out sidebar-link" id="signout-button"
            data-default-img="{% static 'images/signout.png' %}"
            data-active-img="{% static 'images/signout1.png' %}">
            <img src="{% static 'images/signout.png' %}" alt="Sign Out Icon"> SIGN OUT
        </a>
    </div>
&emsp;
    <div id="project-form-container">
        <button id="toggle-btn" type="button" class="btn btn-secondary">MONTHLY ANALYSIS</button>
        <button id="toggle-btn2" type="button" class="btn btn-secondary">MONTHLY PROJECT ANALYSIS</button>
        <button id="toggle-btnweekly" type="button" class="btn btn-secondary">WEEKLY PROJECT ANALYSIS</button>
        <div class="form-set">
            <div class="form-container">
                <!-- Title Section -->
                <div class="form-title-box">
                    <h3 class="form-title">CREATE PROJECT</h3>
                    
                </div>
            
                <!-- Form Section -->
                <div class="form-table">
                    <table>
                        <thead>
                            <!-- <tr>
                                <th>Field</th>
                                <th>Input</th>
                            </tr>
                        </thead> -->
                        <tbody>
                            <tr>
                                <td>Project Name</td>
                                <td><input type="text" id="projectName" placeholder="Enter project name"></td>
                            </tr>
                            <tr>
                                <td>Start Date</td>
                                <td><input type="date" id="startDate"></td>
                            </tr>
                            <tr>
                                <td>End Date</td>
                                <td><input type="date" id="endDate"></td>
                            </tr>
                            <tr>
                                <td>Scope</td>
                                <td><input type="text" id="scope" placeholder="Enter Scope"></td>
                            </tr>
                            <tr>
                                <td>Category</td>
                                <td><input type="text" id="category" placeholder="Enter CATEGORY"></td>
                            </tr>
                            <tr>
                                <td>Benchmark</td>
                                <td><input type="number" id="Benchmark" placeholder="Enter project Benchmark"></td>
                            </tr>
                        </tbody>
                    </table>
                </br>
                    <!-- Submit Button -->
                     <div align="right"><button class="submit-btn">Submit</button>
                        <button class="cancel-btn">Cancel</button></div>
                    
                </div>
            </div>
        
            <div class="calendar-form">
                <div class="calendar_header">
                    <button id="prevMonth"><img id="arrow_left" src="{% static 'images/arrow_left.png' %}"></button>
                    <h2 id="monthYear"></h2>
                    <button id="nextMonth"><img id="arrow_right" src="{% static 'images/arrow_right.png' %}"></button>
                </div>
                <div class="calendar-days">
                    <div>Sun</div> <div>Mon</div> <div>Tue</div> <div>Wed</div> <div>Thu</div> <div>Fri</div> <div>Sat</div>
                </div>
                <div id="calendarDates" class="calendar-dates"></div>
            </div>
        </div>
        
        <div class="search-container">
            <div class="search-history">
                <table>
                    <thead>
                        <tr>
                            <th>User Details</th>
                            {% for key, value in to_approve_data.items %}
                                <th>{{ key|capfirst }}</th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <strong>EMP ID - {{ user_data.employee_id }}</strong><br>
                                Name - {{ user_data.name }}
                            </td>
                            {% for key, value in to_approve_data.items %}
                                <td>
                                    {% if key == "checker" %}
                                        <a href="#" class="checker-link">{{ value }}</a>
                                    {% elif key == "end_date" or key == "start_date" %}
                                        <span class="date-highlight">{{ value }}</span>
                                    {% elif key == "assigned_to" %}
                                        <a href="#" class="assigned-link">{{ value }}</a>
                                    {% else %}
                                        {{ value }}
                                    {% endif %}
                                </td>
                            {% endfor %}
                        </tr>
                        <tr class="action-row">
                            <td colspan="{{ to_approve_data|length|add:1 }}">
                                <div class="button_container">
                                    <button class="action-btn accept-btn" onclick="handleTaskAction('accept')">Accept</button>
                                    <button class="action-btn reject-btn" onclick="handleTaskAction('reject')">Reject</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div> 
    
     
 </div>
 <div id="monthly-analysis" style="display: none;">
    <!-- Your monthly analysis calendar goes here -->
    <button id="back-btn" type="button" class="btn btn-outline-secondary" style="margin-bottom: 15px;">
       ← GO BACK
     </button> 
   <h1 align="center">MONTHLY ANALYSIS</h1>
   <div class="header">
       <select id="employee-select" class="dropdown">
         <option value="">-- Select Employee --</option>
       </select>
   
       <div class="nav" >
         <button id="prev-month">&#8592;</button>
         <h2 id="month-year"></h2>
         <button id="next-month">&#8594;</button>
       </div>
     
     <div id="total-worktime-display" style="font-size: 18px; font-weight: 600; margin-bottom: 15px;"></div>
   </div>
     <div class="calendar" id="calendar"></div>
     <div id="right-sidebar1" class="sidebar">
   </div>
</div>
<div id="monthlyprojectanalysis" style="display: none;">
   <!-- Go Back Button -->
   <button id="go-back-btn" type="button" class="btn btn-outline-secondary">
       ← GO BACK
   </button>
   <h2 align="center">MONTHLY PROJECT ANALYSIS</h2>
   <div id="Selectoptionheader">
   

   <!-- Project Dropdown -->
   <div class="select-project">
       <label for="project-select">SELECT PROJECT</label>
       <select id="project-select" class="dropdown">
           <option value="">-- Select Project --</option>
           <!-- Projects will be populated here dynamically -->
       </select>
  

   <!-- Category Dropdown -->
   <div class="select-category">
       <label for="category-select">SELECT CATEGORY</label>
       <select id="category-select" class="dropdown">
           <option value="">-- Select Category --</option>
           <!-- Categories will be populated here dynamically -->
       </select>
   </div> </div>

   <!-- Total Project Worktime -->
   <div id="total-time-display">
       <h3>Total Project Time:</h3>
       <span id="total-time">0 hrs</span>
   </div>
   <div id="total-phase-time-display" style="display: none;">
       <h3>Total Phase Time:</h3>
       <span id="total-phase-time">0 hrs</span>
   </div>
</div>

   
<div  class="nav1">
   <button id="prev-months">&#8592;</button>
   <h2 id="currentMonth"></h2>
   <button id="next-months">&#8594;</button>
</div>
</br>

   <!-- Calendar Display -->
   <div id="calendar12" class="calendar-grid">
   </div>
   <div id="right-sidebar" class="sidebar">       
   </div>
   
   
</div>
 <div id="weeklyproject-analysis" style="display: none;">
    <button id="go-back-btnz" type="button" class="btn btn-outline-secondary">
        ← GO BACK
    </button>
</br></br>
    <div class="week-selection">
       
        <div>
            <label for="departmentDropdown">Department:</label>
            <select id="departmentDropdown">
                <option value="">Select Department</option>
            </select>
        </div>
        <div>
            <label for="projectDropdown">Project:</label>
            <select id="projectDropdown">
                <option value="">Select Project</option>
            </select>
        </div>
        <div>
            <label for="categoryDropdown">Category:</label>
            <select id="categoryDropdown">
                <option value="">Select Category</option>
            </select>
        </div>
        <div>
            <label for="weekDropdown">Week:</label>
            <select id="weekDropdown">
                <option value="">Select Week</option>
            </select>
        </div>
    </div>

    <div id="projectDataContainer">
        <!-- Project data will be displayed here -->        
    </div>
</div>    
    <!-- ✅ Move JavaScript to the bottom -->
    <script src="{% static 'js/project_tracker.js' %}"></script>
    <script src="{% static 'js/monthlyanalysis.js' %}"></script>
    <script src="{% static 'js/monthlyprojectanalysis.js' %}"></script>
    <script src="{% static 'js/weeklypoject analysis.js' %}"></script>
</body>
</html>
