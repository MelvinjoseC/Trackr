<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tracker</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'images/icon.png' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<style>



</style>
<body>
    <div class="main-container">
        <!-- Sidebar -->

        <div class="sidebar">
          </br>
             <img src="{% static 'images/img_19.png' %}" alt="Responsive image" width="150" height="40">
            </br></br>
            {% if user.is_authenticated %}
            <h4 style="color: white; text-transform: uppercase; font-weight: bold;" align="center"><img  src="{% static 'images/R.png' %}" alt="User" style="width: 45px; height: 50px; border-radius: 16px;"></br>{{ user.username }} </br></br> {{ designation }}</h4>
        {% else %}
            <h4>Welcome, Guest!</h4>
        {% endif %}

</br></br></br>
<!--             <a href="{% url 'task_dashboard' %}" class="sidebar-link"><img src="{% static 'images/img_8.png' %}" width="40" height="40">&nbsp;&nbsp;<span class="sidebar-title">Dashboard</span></a>-->
        <a href="{% url 'calendar' %}" class="sidebar-link"><img src="{% static 'images/img_14.png' %}" width="40" height="40">&nbsp;&nbsp;<span class="sidebar-title">Attendance</span></a>
         <a href="{% url 'main_leave_page' %}" class="sidebar-link"><img src="{% static 'images/img_10.png' %}" width="40" height="40">&nbsp;&nbsp;<span class="sidebar-title"> LeavePage</span></a>
        <a href="{% url 'task_dashboard' %}" class="sidebar-link"><img src="{% static 'images/img_21.png' %}" width="40" height="40">&nbsp;&nbsp;<span class="sidebar-title"> ViewTasks</span></a>
        <a href="{% url 'logouts' %}" class="sign-out sidebar-link"><img src="{% static 'images/img_12.png' %}" width="40" height="40">&nbsp;&nbsp;<span class="sidebar-title"> SignOut</span></a>
    </div>

        <!-- Main Content -->
        <div class="content">
    <!-- Clock section -->
    <div class="date-time-container">
        <!-- Date and Time -->
        <div class="date-time">
                     <div class="date" id="current-date"></div>
                    <div class="time" id="current-time"></div>
                </div>
 <!-- Events Section -->
<div class="events-section" style="background-image: url('{% static "images/img_20.png" %}'); ">
    <div class="events-header">
        {% if user.is_authenticated %}
        <h4>Good Morning, {{ user.username }}!</h4>
        <p>You have 3 events for today:</p>
        {% else %}
        <h4>Welcome, Guest!</h4>
        {% endif %}
    </div>

    <div class="events-list">
        <div class="event-item">
            <div class="event-time">09:30 AM</div>
            <div class="event-details">
                <strong>Design Team Meeting</strong>
                <p>Weekly Review</p>
            </div>
        </div>
        <div class="event-item">
            <div class="event-time">01:30 PM</div>
            <div class="event-details">
                <strong>Conference Discussion</strong>
                <p>New Project Discussion</p>
            </div>
        </div>
        <div class="event-item">
            <div class="event-time">04:30 PM</div>
            <div class="event-details">
                <strong>Stakeholder Meeting</strong>
                <p>Practical Review</p>
            </div>
        </div>
    </div>
</div>
</div>

            <!-- Task Tracker -->
            <section class="task-tracker">
                <div class="task-header">
                    <div class="filters">
                        <select>
                            <option>All Tasks</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="filters">
                        <select>
                            <option>Marine Engineering</option>
                            <option>Other</option>
                        </select>
                        <input type="text" placeholder="Search Tasks">
                    </div>
                    <div class="filters">
                        <select>
                            <option>Assigned Tasks</option>
                            <option>Other</option>
                        </select>
                    </div>
                </div>

                <div class="tasks">
                    <!-- Task Cards -->
                    <div class="task-card2">
                        <h4>Q3 Asia Barge Concept Design</h4>
                        <p>Internal Project | FE/ME-1687/REV: 2</p>
                        <div class="details">
                            <p>Discussion: <span>4 hrs</span></p>
                            <p>Designing: <span>18 hrs</span></p>
                            <p>Calculating: <span>14 hrs</span></p>
                            <p>Modelling: <span>20 hrs</span></p>
                            <p>Checking: <span>10 hrs</span></p>
                        </div>
                        <div class="actions">
                            <button>Info</button>
                            <button>Edit Task</button>
                            <button>Manual Time Sheet</button>
                        </div>
                    </div>
                    <div class="task-card2">
                        <h4>Q3 Asia Barge Concept Design</h4>
                        <p>Internal Project | FE/ME-1687/REV: 2</p>
                        <div class="details">
                            <p>Discussion: <span>4 hrs</span></p>
                            <p>Designing: <span>18 hrs</span></p>
                            <p>Calculating: <span>14 hrs</span></p>
                            <p>Modelling: <span>20 hrs</span></p>
                            <p>Checking: <span>10 hrs</span></p>
                        </div>
                        <div class="actions">
                            <button>Info</button>
                            <button>Edit Task</button>
                            <button>Manual Time Sheet</button>
                        </div>
                    </div>
                    <div class="task-card2">
                        <h4>Q3 Asia Barge Concept Design</h4>
                        <p>Internal Project | FE/ME-1687/REV: 2</p>
                        <div class="details">
                            <p>Discussion: <span>4 hrs</span></p>
                            <p>Designing: <span>18 hrs</span></p>
                            <p>Calculating: <span>14 hrs</span></p>
                            <p>Modelling: <span>20 hrs</span></p>
                            <p>Checking: <span>10 hrs</span></p>
                        </div>
                        <div class="actions">
                            <button>Info</button>
                            <button>Edit Task</button>
                            <button>Manual Time Sheet</button>
                        </div>
                    </div>
                </div>
            </section>

            <div class="task-buttons">
    <div class="task-button">
        <i class="fas fa-plus"></i>
        <span><a href="{% url 'create_task' %}" >CREATE NEW TASK</a></span>
        <i class="fas fa-chevron-right"></i>
    </div>
    <div class="task-button">
        <i class="fas fa-edit"></i>
        <span><a href="{% url 'monthly_calendar1' %}" >EDIT ALL TASKS</a> </span>
        <i class="fas fa-chevron-right"></i>
    </div>
    <div class="task-button">
        <a href="{% url 'monthly_calendar1' %}" >
        <i class="fas fa-calendar-alt"></i>
        <span>MANUAL TIMESHEET</span></a>
        <i class="fas fa-chevron-right"></i>
    </div>
</div>
            <section class="timesheet">
   <div class="timesheet-header">
    <h3>My Daily Timesheet</h3>
    <div class="date-picker">
        <form method="get">
            <input type="date" id="date-input" name="date" value="{{ selected_date }}" />
            <button type="submit">GET</button>
        </form>
        <span id="selected-date">Selected Date: {{ selected_date }}</span>
    </div>
</div>

<div class="timesheet-content">
    {% if monthly_calendar_data %}
        {% for row in monthly_calendar_data %}
        <div class="timesheet-row">
            <div class="task-info">
                <h4 class="task-type">{{ row.scope }}</h4>
                <p class="task-name">{{ row.title }}</p>
                <p class="task-meta">{{ row.d_no }}, REV NO: {{ row.rev_no }}</p>
            </div>
            <div class="task-time">
                <p>
                    {% if row.time %}
                        {{ row.time|floatformat:2 }} hours
                    {% else %}
                        Not Available
                    {% endif %}
                </p>
                <span>{{ row.project }}</span>
            </div>
            <div class="task-actions">
                <i class="fas fa-comment-alt"></i>
                <i class="fas fa-trash"></i>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No Data Found</p>
    {% endif %}
</div>

</section>

        </div>
                <div class="right-sidebar">
    <!-- My Team Section -->
    <section class="team-performance">
        <h3>MY TEAM - MARINE ENGINEERING</h3>
        <p>Team Performance for October, 2024</p>
        <div class="team-stats">
            <div class="stat">
                <p>Total Tasks</p>
                <h4>42</h4>
                </div>
            <div class="stat">
                <p>Assigned</p>
                <h4>30</h4>
                </div>
            <div class="stat">
                <p>Pending</p>
                <h4>18</h4>
                </div>
            <div class="stat">
                <p>Completed</p>
                <h4>12</h4>
            </div>
        </div>
               
    </section>
    <section class="team-members">
        <h3>Team Members</h3>
        <div class="team-stats">
            <div class="member">
                <img src="{% static 'images/R.png' %}" alt="Me" >
                <span>Me</span>
            </div>
            <div class="member">
                <img src="{% static 'images/R.png' %}" alt="Priya Ganesh">
                <span>Priya Ganesh</span>
            </div>
            <div class="member">
                <img src="{% static 'images/R.png' %}" alt="Afzal K">
                <span>Afzal K</span>
            </div>
            <div class="member">
                <img src="{% static 'images/R.png' %}" alt="Ajith Kumar">
                <span>Ajith Kumar</span>
            </div>
            <div class="member">
                <img src="{% static 'images/R.png' %}" alt="Liya Paul">
                <span>Liya Paul</span>
            </div>
        </div>
    </section>


    <!-- Task Details Section -->
    <section class="task-card">
        <h3>TASK DETAILS</h3>
        <div class="task-placeholder">
            <p>
                <i class="fas fa-info-circle"></i> Click on the info button of a particular task to view corresponding task details.
            </p>
        </div>
    </section>

    <!-- Status of Team Projects Section -->
    <section class="team-projects">
        <h3>STATUS OF TEAM PROJECTS</h3>
        <p>Project Status for October, 2024</p>
        <div class="project-tabs">
            <button class="tab active">Running</button>
            <button class="tab">Revisions</button>
            <button class="tab">Upcoming</button>
        </div>
        <div class="project-list">
            <div class="project-item">RORO Bridge <span>DEME</span></div>
            <div class="project-item">PANAMA Chock Support <span>Value Maritime</span></div>
            <div class="project-item">JB-119 Boatlanding <span>CADELER</span></div>
        </div>
    </section>
</div>

    </div>
<script>
    function updateClock() {
        const now = new Date();
        const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        const date = now.toLocaleDateString('en-US', { weekday: 'short', day: 'numeric', month: 'short', year: 'numeric' });

        document.getElementById('current-time').textContent = time;
        document.getElementById('current-date').textContent = date;

        // Highlight the current day
        const dayIndex = now.getDay(); // 0 = Sunday, 6 = Saturday
        const days = document.querySelectorAll('.day');
        days.forEach((day, index) => {
            if (index === dayIndex - 1) { // Adjust for Monday start
                day.classList.add('active');
            } else {
                day.classList.remove('active');
            }
        });
    }

    setInterval(updateClock, 1000);
    updateClock();

    document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', function () {
        document.querySelector('.tab.active').classList.remove('active');
        this.classList.add('active');

        // Handle the content switching logic here
        const content = document.querySelector('.project-list');
        if (this.textContent === 'Running') {
            content.innerHTML = `
                <div class="project-item">RORO Bridge <span>DEME</span></div>
                <div class="project-item">PANAMA Chock Support <span>Value Maritime</span></div>
                <div class="project-item">JB-119 Boatlanding <span>CADELER</span></div>`;
        } else if (this.textContent === 'Revisions') {
            content.innerHTML = `<div class="project-item">Project X <span>Review</span></div>`;
        } else {
            content.innerHTML = `<div class="project-item">Project Y <span>Upcoming</span></div>`;
        }
    });
});

    // Get the input and display elements
const dateInput = document.getElementById("date-input");
const selectedDate = document.getElementById("selected-date");

// Function to format the date
function formatDate(dateString) {
    const options = { weekday: "long", year: "numeric", month: "long", day: "numeric" };
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", options);
}

// Set the initial value of the date input to today's date
const today = new Date().toISOString().split("T")[0]; // Format: YYYY-MM-DD
dateInput.value = today;
selectedDate.textContent = formatDate(today);

// Update the displayed date when the user changes the date
dateInput.addEventListener("change", (event) => {
    selectedDate.textContent = formatDate(event.target.value);
});
 document.addEventListener("DOMContentLoaded", () => {
        const timeElements = document.querySelectorAll(".time-display");
        timeElements.forEach((element) => {
            const decimalTime = parseFloat(element.dataset.time);
            if (!isNaN(decimalTime)) {
                const hours = Math.floor(decimalTime);
                const minutes = Math.round((decimalTime - hours) * 60);
                element.textContent = `${hours}hr ${minutes}min`;
            } else {
                element.textContent = "Not Available";
            }
        });
    });
</script>
</body>
</html>
